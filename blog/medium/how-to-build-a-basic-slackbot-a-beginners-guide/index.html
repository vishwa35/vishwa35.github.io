<!DOCTYPE html>
<script src="/js/dark-mode.js"></script>
<html lang="en-us" class="lightTheme" id="theme">

<head>
  <title>How to build a basic slackbot: a  beginner’s guide | Vishwa Shah</title>

  <meta charset="UTF-8">
  <meta name="language" content="en">
  <meta name="description" content="">
  <meta name="keywords" content="programming , bot , api , slack , hack , github , vishwa , shah , tampa , atlanta , georgia tech , technology , software , blog , postcardsfromvish , awhsiv , vishwa35 , vishifishy , hillsborough , lyft , palantir , square , redfin , computer science , photography , podcast , aneka , yja , gatech">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  
  
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="How to build a basic slackbot: a  beginner’s guide" />
  <meta name="twitter:description" content=""/>
  <meta name="twitter:site" content="@vishifishy" />
  <meta name="twitter:creator" content="https://twitter.com/vishifishy" />
  

  <link rel="shortcut icon" type="image/png" href="/favicon.ico" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

  
  
    
 
  
  
  
  
  
  
    
    <link type="text/css" rel="stylesheet" href="/css/post.min.032a06cbc7dc731b7a555f35beaae3739a366851cd0e9984a0c0a9e900697103.css" integrity="sha256-AyoGy8fccxt6VV81vqrjc5o2aFHNDpmEoMCp6QBpcQM="/>
  
    
    <link type="text/css" rel="stylesheet" href="/css/custom.min.dd2e8cd202e8f3757845507601f19f44d1da26619a2b807d3eb5edaa2388c426.css" integrity="sha256-3S6M0gLo83V4RVB2AfGfRNHaJmGaK4B9PrXtqiOIxCY="/>
  
  
   
   
    

<script type="application/ld+json">
  
    {
      "@context" : "https://schema.org",
      "@type" : "BlogPosting",
      "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/vishwashah.me\/"
      },
      "articleSection" : "blog",
      "name" : "How to build a basic slackbot: a  beginner’s guide",
      "headline" : "How to build a basic slackbot: a  beginner’s guide",
      "description" : "",
      "inLanguage" : "en-US",
      "author" : "",
      "creator" : "",
      "publisher": "",
      "accountablePerson" : "",
      "copyrightHolder" : "",
      "copyrightYear" : "2019",
      "datePublished": "2019-01-06 20:29:51.157 \u002b0000 UTC",
      "dateModified" : "2019-01-06 20:29:51.157 \u002b0000 UTC",
      "url" : "https:\/\/vishwashah.me\/blog\/medium\/how-to-build-a-basic-slackbot-a-beginners-guide\/",
      "wordCount" : "1248",
      "keywords" : ["programming", "bot", "api", "slack", "hack", "github", "Blog"]
    }
  
  </script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-57527171-3', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</head>

<body>
  <div class="burger__container">
  <div class="burger" aria-controls="navigation" aria-label="Menu">
    <div class="burger__meat burger__meat--1"></div>
    <div class="burger__meat burger__meat--2"></div>
    <div class="burger__meat burger__meat--3"></div>
  </div>
</div>
 

  <nav class="myNav" id="navigation">
  <ul class="nav__list">
    
    
      <li>
        <a  href="/">about</a>
      </li>
    
      <li>
        <a  class="active"
         href="/blog">blog</a>
      </li>
    
      <li>
        <a  href="/ongoing-projects">ongoing projects</a>
      </li>
    
      <li>
        <a  href="/portfolio">portfolio</a>
      </li>
    
      <li>
        <a  href="/reading-list">reading list</a>
      </li>
    
      <li>
        <a  href="/resume">resume</a>
      </li>
    
    <li>
      <i class="fas fa-moon" id="dark-mode-toggle"></i>
    </li>
  </ul>
</nav>


  <main>
    
    

    <div class="flex-wrapper">
      <div class="post__container">
        <div class="post">
          <header class="post__header">
            <h1 id="post__title">How to build a basic slackbot: a  beginner’s guide</h1>
            <time datetime="2019-01-06 20:29:51.157 &#43;0000 UTC" class="post__date"
            >Jan 6 2019</time>
          </header>
          <article class="post__content">
              
<h4 id="lets-try-and-automate-something-in-python">Let’s try and automate something [in python]</h4>
<p><img src="images/1.jpeg" alt="image"></p>
<p>Photo by <a href="https://unsplash.com/photos/R4WCbazrD1g?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText" target="_blank">Rock’n Roll Monkey</a>
 on <a href="https://unsplash.com/search/photos/bot?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText" target="_blank">Unsplash</a>
</p>
<p><strong><em>Update: code and tutorial updated on June 28 to reflect Slack API changes</em></strong></p>
<h3 id="slackbots-why-use-them">Slackbots: Why use them?<a class="anchor" href="#slackbots-why-use-them">#</a></h3>
<p>Before we get into the tutorial part of this post, let’s take a look at why this can be a worthy project and tool.</p>
<p><a href="http://slack.com" target="_blank">Slack</a>
 is an increasingly popular tool for team-wide communication. It’s grown to include plugins for other widely used project management tools, like JIRA, Google Drive, and the likes. Any slack user knows — the more you can do from within the conversation, the better.</p>
<p>Common uses for a slackbot range from a simple notifier for when a task is complete (like a test build, or when your lunch is ready) to interactive, button-based bots that execute commands at the user’s will. You can build polling mechanisms, conversational bots, and more.</p>
<h3 id="setting-up-a-python-programming-environment">Setting up a python programming environment<a class="anchor" href="#setting-up-a-python-programming-environment">#</a></h3>
<p><img src="images/2.gif" alt="image"></p>
<p>If you’re a windows user and you haven’t used python before, you’ll need to <a href="https://docs.python.org/3/using/windows.html" target="_blank">install</a>
 it. Linux/Mac users: Unix comes with python!</p>
<p>Once installed, fire up your terminal and type <code>python</code> or <code>python3</code> (if you have multiple installations) to make sure it works and is there.</p>
<p>Also check to see you have a good text editor for code: <a href="https://www.sublimetext.com/3" target="_blank">sublime</a>
 and <a href="https://flight-manual.atom.io/getting-started/sections/installing-atom/" target="_blank">atom</a>
 are great choices.</p>
<p>Optional: It might also be useful to work in a virtual environment — it’s good practice for when you have a lot of dependencies.</p>
<pre><code>pip install virtualenv  
virtualenv tutorial  
source tutorial/bin/activate
</code></pre>
<p><img src="images/3.gif" alt="image"></p>
<p>You should also fork the <a href="https://github.com/vishwa35/slackbot-tutorial" target="_blank">tutorial GitHub repo</a>
 and clone to your local machine, as we’ll be using that code as a framework for this tutorial.</p>
<p>To do this, go to the <a href="https://github.com/vishwa35/slackbot-tutorial" target="_blank">repo</a>
 and click <code>Fork</code> on the top right. The forked repo should be <strong>&lt;yourusername&gt;/slackbot-tutorial</strong>. Hit the green <code>Clone or download</code> button on the right under the stats bar, and copy the url. Return to the terminal to clone the repository:</p>
<pre><code>cd Desktop/  
git clone [https://github.com/yourusername/slackbot-tutorial.git](https://github.com/vishwa35/slackbot-tutorial.git)  
cd slackbot-tutorial/  
sublime . (or open your text editor and open this directory)
</code></pre>
<h3 id="slack-apps">Slack Apps<a class="anchor" href="#slack-apps">#</a></h3>
<p>There are two ways to go about creating your slackbot: standalone bots, or Slack apps. Apps allow a wider range of functionality going forward, and is Slack’s recommended route for creating a bot user.</p>
<p>Go to <a href="https://api.slack.com/apps" target="_blank">https://api.slack.com/apps</a>
 and hit <code>Create New App</code> on the top right. Give it a name and pick a workspace where you can create a channel to test your bot in. You can always reconfigure your bot for another workspace later, or even post it to the Slack App Directory.</p>
<p>I recommend making a #test channel in a workspace you create just for development purposes, or one that has relatively few users who wouldn’t mind you testing something out there.</p>
<p><img src="images/4.png" alt="image"></p>
<p>The first thing you’ll want to do is get the bot token. When you get to the above page, click Bots. Add some scopes; these determine what permissions your app’s bot user will have. To start, <strong><a href="https://api.slack.com/scopes/chat:write" target="_blank">chat:write</a>
 and <a href="https://api.slack.com/scopes/im:write" target="_blank">im:write</a>
</strong> are probably enough.</p>
<p><img src="images/5.png" alt="image"></p>
<p>Now, to actually get your tokens, you’ll want to go to <code>OAuth &amp;amp; Permissions</code> on the left sidebar.</p>
<p>Here, you’ll be able to <code>Install the App to the Workspace</code> and generate the necessary tokens. As a rule of thumb, <strong>bot tokens</strong> start with <code>xoxb-.</code></p>
<p>You’ll also want the <strong>signing secret</strong>, which is located under Basic Information &gt; App Credentials.</p>
<h4 id="acting-as-your-bot">Acting as your Bot</h4>
<p>Now you have the credentials necessary to make API calls and act as your bot. To test this out, fire up a terminal and run this (with the correct token and channel name):</p>
<pre><code>curl -X POST \  
     -H ';Authorization: Bearer xoxb-your-token'; \  
     -H ';Content-type: application/json;charset=utf-8'; \  
    --data ';{&quot;channel&quot;:&quot;#test&quot;,&quot;text&quot;:&quot;Hello, Slack!&quot;}'; \  
https://slack.com/api/chat.postMessage
</code></pre>
<p>If you go to that channel in your slack workspace, you should now see a message from your bot! You just made an HTTP POST request — asked a server to post a message somewhere.</p>
<h3 id="programming-the-bot">Programming the Bot<a class="anchor" href="#programming-the-bot">#</a></h3>
<p>We want to do the above programatically. There are a few different ways you can set up a slackbot. I’ll cover the following:</p>
<ul>
<li>Triggered periodically (on a schedule) to say something</li>
<li>/slash commands</li>
</ul>
<p>The second requires a server running, while the first does not.</p>
<h4 id="scheduled-messages">Scheduled Messages</h4>
<p>Let’s say you want to periodically send a message somewhere — maybe every Monday morning. Go to the text editor where you opened up <code>slackbot-tutorial</code>.</p>
<p>You should see a file <code>scheduled.py</code>. Take a look: <code>sendMessage</code> is a function that fires off the API call to slack and posts a message. At the bottom, you’ll see the main method: what executes when you run the script. Here, you’ll see a few things to note:</p>
<ul>
<li><code>SLACK_BOT_TOKEN</code> is pulled from <code>os.environ[';SLACK_BOT_TOKEN';]</code> — how? Run <code>export SLACK_BOT_TOKEN=&quot;xoxb-your-token&quot;</code> in your terminal to set this variable.</li>
<li>a scheduler is used here, and there’s an infinite loop that checks for events on the scheduler. By default here, I’ve scheduled the <code>sendMessage</code> function to be called every minute.</li>
</ul>
<p>To test this out, go back to the terminal where you’re in the <code>slackbot-tutorial</code> directory and run
<code>export SLACK_BOT_TOKEN=&quot;xoxb-your-token&quot;   python scheduled.py</code></p>
<p>You should see the log messages print. Make sure you’ve changed <code>**channel=#test**</code> in the code to your test channel name (if different) and added your bot (in the slack channel, type <code>/invite @botname</code>. Let it run for a couple minutes and watch the messages show up on Slack!</p>
<p>This is, of course, a super basic implementation of a scheduled message sender — you can actually do this just with slackbot <code>/remind #test “Hello, Slack!” every Monday at 9am</code>.</p>
<p>The <strong>true power</strong> here is that you can substitute in any function for <code>sendMessage</code>, leveraging the power of interfacing with external services through APIs, doing math, etc and then constructing a message to post.</p>
<h4 id="slash-commands">Slash Commands</h4>
<p>This one requires a little more setup — go back to your <a href="http://api.slack.com/apps" target="_blank">app settings</a>
 &gt; Slash Commands. Create a new slash command: for example, <code>/test</code>. For the request URL, you’ll need to either deploy this web server (I use Heroku), or run a local <code>ngrok</code> instance to test it. The latter will run it locally, and is best for testing. You can <code>brew install ngrok</code> or get it from <a href="https://ngrok.com/download" target="_blank">here</a>
.</p>
<p>In the starter code repo, look for <code>slashCommand.py</code> to start understanding this method. To start the server, run <code>python server.py</code>. The Request URL to put in Slack will be given by your <code>ngrok</code> instance and the <code>@app.route</code> in your code — it would be something like <a href="http://a8787d2fea3b.ngrok.io" target="_blank">http://a1234b5cde6f.ngrok.io</a>
/<strong>slack/test</strong> (the bold part comes from the route defined in the code). You should be able to test the slash commands in your Slack workspace. From the tutorial code, try <code>/test</code>.</p>
<h3 id="moving-forward">Moving Forward<a class="anchor" href="#moving-forward">#</a></h3>
<p>Now you have a very basic slackbot that either operates on a command or runs every so often. Be creative with how you use it! Think about what else you can link this skeleton to to make it more useful.</p>
<h4 id="other-ways-your-bot-might-respond">Other ways your bot might respond</h4>
<ol>
<li>Actions/responses could be triggered by mentions or certain phrases. This requires running a server and listening the messages somewhere.</li>
<li>You bot could be conversational, and might contribute to threads. Check out some NLP to get started on having intelligible conversation! Word2Vec + TensorFlow or Keras might be a place to start. DialogFlow is also great.</li>
<li>Link it up with some other APIs. Maybe you want to be able to interact with a Google Sheet and run some calculations. You might want to send other users a message based on some actions. Integrate <a href="https://api.slack.com/docs/message-buttons" target="_blank">buttons</a>
. Perhaps you want to trigger messages based on something else.</li>
</ol>


              
          </article>
          


<ul class="tags__list">
    
    <li class="tag__item">
        <a class="tag__link" href="https://vishwashah.me/tags/programming/">programming</a>
    </li>
    <li class="tag__item">
        <a class="tag__link" href="https://vishwashah.me/tags/bot/">bot</a>
    </li>
    <li class="tag__item">
        <a class="tag__link" href="https://vishwashah.me/tags/api/">api</a>
    </li>
    <li class="tag__item">
        <a class="tag__link" href="https://vishwashah.me/tags/slack/">slack</a>
    </li>
    <li class="tag__item">
        <a class="tag__link" href="https://vishwashah.me/tags/hack/">hack</a>
    </li>
    <li class="tag__item">
        <a class="tag__link" href="https://vishwashah.me/tags/github/">github</a>
    </li></ul>

 <div class="pagination">
  
    <a class="pagination__item" href="https://vishwashah.me/blog/medium/interning-at-redfin/">
        <span class="pagination__label">Previous Post</span>
        <span class="pagination__title">Interning at Redfin</span>
    </a>
  

  
    <a class="pagination__item" href="https://vishwashah.me/blog/medium/hack-your-life/">
      <span class="pagination__label">Next Post</span>
      <span class="pagination__title" >Using Habits to Hack Your Life</a>
    </a>
  
</div>

          
          <footer class="post__footer">
            


<div class="social-icons">
  
     
    
      <a class="social-icons__link" title="Twitter"
         href="https://twitter.com/vishifishy"
         target="_blank" rel="noopener">
        
          <i class="social-icons__icon fab fa-twitter fa-lg"></i>
        
      </a>
    
  
     
    
      <a class="social-icons__link" title="GitHub"
         href="https://github.com/vishwa35"
         target="_blank" rel="noopener">
        
          <i class="social-icons__icon fab fa-github fa-lg"></i>
        
      </a>
    
  
     
    
      <a class="social-icons__link" title="Instagram"
         href="https://instagram.com/postcardsfromvish"
         target="_blank" rel="noopener">
        
          <i class="social-icons__icon fab fa-instagram fa-lg"></i>
        
      </a>
    
  
     
    
      <a class="social-icons__link" title="LinkedIn"
         href="https://www.linkedin.com/in/vishwa35/"
         target="_blank" rel="noopener">
        
          <i class="social-icons__icon fab fa-linkedin fa-lg"></i>
        
      </a>
    
  
     
    
      <a class="social-icons__link" title="Medium"
         href="https://medium.com/@vishwa35"
         target="_blank" rel="noopener">
        
          <i class="social-icons__icon fab fa-medium fa-lg"></i>
        
      </a>
    
     
</div>

            <p>© 2020</p>
          </footer>
          </div>
      </div>
      
    </div>
    

  </main>

   

  
  <script src="/js/index.min.49e4d8a384357d9b445b87371863419937ede9fa77737522ffb633073aebfa44.js" integrity="sha256-SeTYo4Q1fZtEW4c3GGNBmTft6fp3c3Ui/7YzBzrr&#43;kQ=" crossorigin="anonymous"></script>
  
  
  <script src="https://unpkg.com/prismjs@1.20.0/components/prism-core.min.js"></script>

  
  <script src="https://unpkg.com/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js"
    data-autoloader-path="https://unpkg.com/prismjs@1.20.0/components/"></script>

  


  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
</body>

</html>
